(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[327],{7334:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/grades",function(){return t(2573)}])},2573:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return T}});var l=t(5893),r=t(7294),n=t(1464),c=t(6650),s=t(5720),o=t(9648),i=t(4029),m=t(9681),d=t(4221),u=t(3492);let p=new Map([["bold",r.createElement(r.Fragment,null,r.createElement("path",{d:"M232,60H212V48a12,12,0,0,0-12-12H56A12,12,0,0,0,44,48V60H24A20,20,0,0,0,4,80V96a44.05,44.05,0,0,0,44,44h.77A84.18,84.18,0,0,0,116,195.15V212H96a12,12,0,0,0,0,24h64a12,12,0,0,0,0-24H140V195.11c30.94-4.51,56.53-26.2,67-55.11h1a44.05,44.05,0,0,0,44-44V80A20,20,0,0,0,232,60ZM28,96V84H44v28c0,1.21,0,2.41.09,3.61A20,20,0,0,1,28,96Zm160,15.1c0,33.33-26.71,60.65-59.54,60.9A60,60,0,0,1,68,112V60H188ZM228,96a20,20,0,0,1-16.12,19.62c.08-1.5.12-3,.12-4.52V84h16Z"}))],["duotone",r.createElement(r.Fragment,null,r.createElement("path",{d:"M200,48v63.1c0,39.7-31.75,72.6-71.45,72.9A72,72,0,0,1,56,112V48Z",opacity:"0.2"}),r.createElement("path",{d:"M232,64H208V48a8,8,0,0,0-8-8H56a8,8,0,0,0-8,8V64H24A16,16,0,0,0,8,80V96a40,40,0,0,0,40,40h3.65A80.13,80.13,0,0,0,120,191.61V216H96a8,8,0,0,0,0,16h64a8,8,0,0,0,0-16H136V191.58c31.94-3.23,58.44-25.64,68.08-55.58H208a40,40,0,0,0,40-40V80A16,16,0,0,0,232,64ZM48,120A24,24,0,0,1,24,96V80H48v32q0,4,.39,8Zm144-8.9c0,35.52-29,64.64-64,64.9a64,64,0,0,1-64-64V56H192ZM232,96a24,24,0,0,1-24,24h-.5a81.81,81.81,0,0,0,.5-8.9V80h24Z"}))],["fill",r.createElement(r.Fragment,null,r.createElement("path",{d:"M232,64H208V48a8,8,0,0,0-8-8H56a8,8,0,0,0-8,8V64H24A16,16,0,0,0,8,80V96a40,40,0,0,0,40,40h3.65A80.13,80.13,0,0,0,120,191.61V216H96a8,8,0,0,0,0,16h64a8,8,0,0,0,0-16H136V191.58c31.94-3.23,58.44-25.64,68.08-55.58H208a40,40,0,0,0,40-40V80A16,16,0,0,0,232,64ZM48,120A24,24,0,0,1,24,96V80H48v32q0,4,.39,8ZM232,96a24,24,0,0,1-24,24h-.5a81.81,81.81,0,0,0,.5-8.9V80h24Z"}))],["light",r.createElement(r.Fragment,null,r.createElement("path",{d:"M232,66H206V48a6,6,0,0,0-6-6H56a6,6,0,0,0-6,6V66H24A14,14,0,0,0,10,80V96a38,38,0,0,0,38,38h5.14A78,78,0,0,0,122,189.75V218H96a6,6,0,0,0,0,12h64a6,6,0,0,0,0-12H134V189.75c32.44-2.52,59.43-25.3,68.62-55.75H208a38,38,0,0,0,38-38V80A14,14,0,0,0,232,66ZM48,122A26,26,0,0,1,22,96V80a2,2,0,0,1,2-2H50v34a80.87,80.87,0,0,0,.65,10Zm146-10.9c0,36.62-29.38,66.63-65.5,66.9A66,66,0,0,1,62,112V54H194ZM234,96a26,26,0,0,1-26,26h-2.77a78.45,78.45,0,0,0,.77-10.9V78h26a2,2,0,0,1,2,2Z"}))],["regular",r.createElement(r.Fragment,null,r.createElement("path",{d:"M232,64H208V48a8,8,0,0,0-8-8H56a8,8,0,0,0-8,8V64H24A16,16,0,0,0,8,80V96a40,40,0,0,0,40,40h3.65A80.13,80.13,0,0,0,120,191.61V216H96a8,8,0,0,0,0,16h64a8,8,0,0,0,0-16H136V191.58c31.94-3.23,58.44-25.64,68.08-55.58H208a40,40,0,0,0,40-40V80A16,16,0,0,0,232,64ZM48,120A24,24,0,0,1,24,96V80H48v32q0,4,.39,8Zm144-8.9c0,35.52-29,64.64-64,64.9a64,64,0,0,1-64-64V56H192ZM232,96a24,24,0,0,1-24,24h-.5a81.81,81.81,0,0,0,.5-8.9V80h24Z"}))],["thin",r.createElement(r.Fragment,null,r.createElement("path",{d:"M232,68H204V48a4,4,0,0,0-4-4H56a4,4,0,0,0-4,4V68H24A12,12,0,0,0,12,80V96a36,36,0,0,0,36,36h6.66A76,76,0,0,0,124,187.89V220H96a4,4,0,0,0,0,8h64a4,4,0,0,0,0-8H132V187.88c32.93-1.74,60.41-24.91,69.11-55.88H208a36,36,0,0,0,36-36V80A12,12,0,0,0,232,68ZM48,124A28,28,0,0,1,20,96V80a4,4,0,0,1,4-4H52v36a77,77,0,0,0,1,12Zm148-12.9c0,37.71-30.79,68.62-68,68.9a68,68,0,0,1-68-68V52H196ZM236,96a28,28,0,0,1-28,28h-5.1a77.35,77.35,0,0,0,1.1-12.9V76h28a4,4,0,0,1,4,4Z"}))]]);var h=Object.defineProperty,f=Object.defineProperties,g=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable,v=(e,a,t)=>a in e?h(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,E=(e,a)=>{for(var t in a||(a={}))y.call(a,t)&&v(e,t,a[t]);if(b)for(var t of b(a))j.call(a,t)&&v(e,t,a[t]);return e},x=(e,a)=>f(e,g(a));let Z=(0,r.forwardRef)((e,a)=>r.createElement(u.Z,x(E({ref:a},e),{weights:p})));Z.displayName="Trophy";var V=t(752);let M=new Map([["bold",r.createElement(r.Fragment,null,r.createElement("path",{d:"M216.49,168.49a12,12,0,0,1-17,0L128,97,56.49,168.49a12,12,0,0,1-17-17l80-80a12,12,0,0,1,17,0l80,80A12,12,0,0,1,216.49,168.49Z"}))],["duotone",r.createElement(r.Fragment,null,r.createElement("path",{d:"M208,160H48l80-80Z",opacity:"0.2"}),r.createElement("path",{d:"M213.66,154.34l-80-80a8,8,0,0,0-11.32,0l-80,80A8,8,0,0,0,48,168H208a8,8,0,0,0,5.66-13.66ZM67.31,152,128,91.31,188.69,152Z"}))],["fill",r.createElement(r.Fragment,null,r.createElement("path",{d:"M215.39,163.06A8,8,0,0,1,208,168H48a8,8,0,0,1-5.66-13.66l80-80a8,8,0,0,1,11.32,0l80,80A8,8,0,0,1,215.39,163.06Z"}))],["light",r.createElement(r.Fragment,null,r.createElement("path",{d:"M212.24,164.24a6,6,0,0,1-8.48,0L128,88.49,52.24,164.24a6,6,0,0,1-8.48-8.48l80-80a6,6,0,0,1,8.48,0l80,80A6,6,0,0,1,212.24,164.24Z"}))],["regular",r.createElement(r.Fragment,null,r.createElement("path",{d:"M213.66,165.66a8,8,0,0,1-11.32,0L128,91.31,53.66,165.66a8,8,0,0,1-11.32-11.32l80-80a8,8,0,0,1,11.32,0l80,80A8,8,0,0,1,213.66,165.66Z"}))],["thin",r.createElement(r.Fragment,null,r.createElement("path",{d:"M210.83,162.83a4,4,0,0,1-5.66,0L128,85.66,50.83,162.83a4,4,0,0,1-5.66-5.66l80-80a4,4,0,0,1,5.66,0l80,80A4,4,0,0,1,210.83,162.83Z"}))]]);var A=Object.defineProperty,H=Object.defineProperties,N=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable,S=(e,a,t)=>a in e?A(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,C=(e,a)=>{for(var t in a||(a={}))O.call(a,t)&&S(e,t,a[t]);if(w)for(var t of w(a))F.call(a,t)&&S(e,t,a[t]);return e},P=(e,a)=>H(e,N(a));let L=(0,r.forwardRef)((e,a)=>r.createElement(u.Z,P(C({ref:a},e),{weights:M})));L.displayName="CaretUp";var _=t(5889);function T(){let{data:e,isLoading:a,error:t}=(0,i.EO)("grades"),[u,p]=(0,r.useState)(""),[h,f]=(0,r.useState)("name"),[g,b]=(0,r.useState)("asc");(0,r.useEffect)(()=>{if(e&&(console.log("Полученные оценки:",e),e.length>0&&(console.log("Структура первой оценки:",e[0]),console.log("Subject поле:",e.some(e=>e.Subject)?"Да":"Нет"),console.log("Column поле:",e.some(e=>e.Column)?"Да":"Нет"),e.some(e=>e.Column)))){var a;console.log("Пример Column:",null===(a=e.find(e=>e.Column))||void 0===a?void 0:a.Column)}},[e]);let y=(0,r.useMemo)(()=>{if(!e||!e.length)return[];console.log("Начинаю группировку оценок");let a=new Map;return e.forEach(e=>{var t,l;let r=(null===(t=e.Column)||void 0===t?void 0:t.Subject)||e.Subject;if(r&&"object"==typeof r&&(console.log("Subject - это объект:",r),r="Name"in r&&r.Name?String(r.Name):JSON.stringify(r)),!r){console.log("Оценка без предмета:",e);return}a.has(r)||a.set(r,{name:r,grades:[],average:0}),null===(l=a.get(r))||void 0===l||l.grades.push(e)}),a.forEach(e=>{let a=e.grades.filter(e=>e.Value&&!isNaN(parseFloat(String(e.Value)))).map(e=>parseFloat(String(e.Value)));if(a.length>0){let t=a.reduce((e,a)=>e+a,0);e.average=+(t/a.length).toFixed(2)}}),console.log("Результат группировки:",Array.from(a.values())),Array.from(a.values())},[e]),j=(0,r.useMemo)(()=>{if(!y.length)return[];let e=y;return u&&(e=e.filter(e=>e.name.toLowerCase().includes(u.toLowerCase()))),e.sort((e,a)=>{if("name"===h){let t=e.name?String(e.name):"",l=a.name?String(a.name):"",r=t.localeCompare(l);return"asc"===g?r:-r}{let t=(e.average||0)-(a.average||0);return"asc"===g?t:-t}})},[y,u,h,g]),v=e=>{h===e?b("asc"===g?"desc":"asc"):(f(e),b("asc"))},E=(0,r.useMemo)(()=>{if(!y.length)return 0;let e=y.filter(e=>e.average>0);return e.length?+(e.reduce((e,a)=>e+a.average,0)/e.length).toFixed(2):0},[y]);return(0,l.jsx)(n.Z,{title:"Grades",children:a?(0,l.jsx)(s.Z,{text:"Loading grades..."}):t?(0,l.jsx)(o.Z,{message:t.message}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"mb-6",children:(0,l.jsx)(c.Z,{className:"p-5",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-lg font-mono font-bold mb-2",children:"Average Grade"}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(Z,{size:24,weight:"fill",className:"text-yellow-500 mr-3"}),(0,l.jsx)("span",{className:"text-xl font-bold ".concat((0,m.Wq)(E)),children:E||"N/A"})]})]}),(0,l.jsx)("div",{className:"text-5xl font-bold ".concat((0,m.Wq)(E)),children:E||"N/A"})]})})}),(0,l.jsx)("div",{className:"mb-5",children:(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(V.Y,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-secondary"}),(0,l.jsx)("input",{type:"text",placeholder:"Search by subject...",value:u,onChange:e=>p(e.target.value),className:"w-full bg-surface border border-overlay rounded-lg py-2 pl-10 pr-4 text-text-primary focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]})}),(0,l.jsx)("div",{className:"mb-6",children:(0,l.jsxs)("div",{className:"flex justify-between items-center px-2 py-1 text-sm text-text-secondary",children:[(0,l.jsxs)("button",{onClick:()=>v("name"),className:"flex items-center focus:outline-none",children:["Subject","name"===h&&("asc"===g?(0,l.jsx)(L,{size:16,className:"ml-1"}):(0,l.jsx)(_.p,{size:16,className:"ml-1"}))]}),(0,l.jsxs)("button",{onClick:()=>v("average"),className:"flex items-center focus:outline-none",children:["Average Grade","average"===h&&("asc"===g?(0,l.jsx)(L,{size:16,className:"ml-1"}):(0,l.jsx)(_.p,{size:16,className:"ml-1"}))]})]})}),(0,l.jsx)("div",{className:"space-y-6 mb-8",children:j.length>0?(0,l.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{staggerChildren:.05},className:"space-y-6",children:j.map((e,a)=>(0,l.jsx)(d.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"mb-2",children:(0,l.jsxs)(c.Z,{className:"p-5 shadow-md hover:shadow-lg transition-shadow duration-200",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-overlay",children:[(0,l.jsx)("h3",{className:"font-medium text-lg",children:"string"==typeof e.name?e.name:"object"==typeof e.name&&null!==e.name?JSON.stringify(e.name):"Unknown Subject"}),(0,l.jsx)("span",{className:"font-bold text-xl ".concat((0,m.Wq)(e.average)),children:e.average||"N/A"})]}),(0,l.jsx)("div",{className:"flex flex-wrap gap-3 pt-1",children:e.grades.map((e,a)=>{let t="string"==typeof e.Topic?e.Topic:"object"==typeof e.Topic&&null!==e.Topic?JSON.stringify(e.Topic):"string"==typeof e.Comment?e.Comment:"object"==typeof e.Comment&&null!==e.Comment?JSON.stringify(e.Comment):"";return(0,l.jsx)("div",{className:"px-4 py-2 rounded-md shadow-sm bg-surface-hover ".concat((0,m.Wq)(e.Value||"")," font-medium border border-overlay hover:scale-105 transition-transform duration-150"),title:t,children:(0,m.e9)(e)},a)})})]})},e.name))}):(0,l.jsx)(c.Z,{className:"p-8 text-center shadow-md",children:(0,l.jsx)("p",{className:"text-text-secondary text-lg",children:u?"Subjects not found":"Grades not available"})})})]})})}},5889:function(e,a,t){"use strict";t.d(a,{p:function(){return f}});var l=t(7294),r=t(3492);let n=new Map([["bold",l.createElement(l.Fragment,null,l.createElement("path",{d:"M216.49,104.49l-80,80a12,12,0,0,1-17,0l-80-80a12,12,0,0,1,17-17L128,159l71.51-71.52a12,12,0,0,1,17,17Z"}))],["duotone",l.createElement(l.Fragment,null,l.createElement("path",{d:"M208,96l-80,80L48,96Z",opacity:"0.2"}),l.createElement("path",{d:"M215.39,92.94A8,8,0,0,0,208,88H48a8,8,0,0,0-5.66,13.66l80,80a8,8,0,0,0,11.32,0l80-80A8,8,0,0,0,215.39,92.94ZM128,164.69,67.31,104H188.69Z"}))],["fill",l.createElement(l.Fragment,null,l.createElement("path",{d:"M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,48,88H208a8,8,0,0,1,5.66,13.66Z"}))],["light",l.createElement(l.Fragment,null,l.createElement("path",{d:"M212.24,100.24l-80,80a6,6,0,0,1-8.48,0l-80-80a6,6,0,0,1,8.48-8.48L128,167.51l75.76-75.75a6,6,0,0,1,8.48,8.48Z"}))],["regular",l.createElement(l.Fragment,null,l.createElement("path",{d:"M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z"}))],["thin",l.createElement(l.Fragment,null,l.createElement("path",{d:"M210.83,98.83l-80,80a4,4,0,0,1-5.66,0l-80-80a4,4,0,0,1,5.66-5.66L128,170.34l77.17-77.17a4,4,0,1,1,5.66,5.66Z"}))]]);var c=Object.defineProperty,s=Object.defineProperties,o=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,a,t)=>a in e?c(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,p=(e,a)=>{for(var t in a||(a={}))m.call(a,t)&&u(e,t,a[t]);if(i)for(var t of i(a))d.call(a,t)&&u(e,t,a[t]);return e},h=(e,a)=>s(e,o(a));let f=(0,l.forwardRef)((e,a)=>l.createElement(r.Z,h(p({ref:a},e),{weights:n})));f.displayName="CaretDown"},752:function(e,a,t){"use strict";t.d(a,{Y:function(){return f}});var l=t(7294),r=t(3492);let n=new Map([["bold",l.createElement(l.Fragment,null,l.createElement("path",{d:"M232.49,215.51,185,168a92.12,92.12,0,1,0-17,17l47.53,47.54a12,12,0,0,0,17-17ZM44,112a68,68,0,1,1,68,68A68.07,68.07,0,0,1,44,112Z"}))],["duotone",l.createElement(l.Fragment,null,l.createElement("path",{d:"M192,112a80,80,0,1,1-80-80A80,80,0,0,1,192,112Z",opacity:"0.2"}),l.createElement("path",{d:"M229.66,218.34,179.6,168.28a88.21,88.21,0,1,0-11.32,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"}))],["fill",l.createElement(l.Fragment,null,l.createElement("path",{d:"M168,112a56,56,0,1,1-56-56A56,56,0,0,1,168,112Zm61.66,117.66a8,8,0,0,1-11.32,0l-50.06-50.07a88,88,0,1,1,11.32-11.31l50.06,50.06A8,8,0,0,1,229.66,229.66ZM112,184a72,72,0,1,0-72-72A72.08,72.08,0,0,0,112,184Z"}))],["light",l.createElement(l.Fragment,null,l.createElement("path",{d:"M228.24,219.76l-51.38-51.38a86.15,86.15,0,1,0-8.48,8.48l51.38,51.38a6,6,0,0,0,8.48-8.48ZM38,112a74,74,0,1,1,74,74A74.09,74.09,0,0,1,38,112Z"}))],["regular",l.createElement(l.Fragment,null,l.createElement("path",{d:"M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"}))],["thin",l.createElement(l.Fragment,null,l.createElement("path",{d:"M226.83,221.17l-52.7-52.7a84.1,84.1,0,1,0-5.66,5.66l52.7,52.7a4,4,0,0,0,5.66-5.66ZM36,112a76,76,0,1,1,76,76A76.08,76.08,0,0,1,36,112Z"}))]]);var c=Object.defineProperty,s=Object.defineProperties,o=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,a,t)=>a in e?c(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,p=(e,a)=>{for(var t in a||(a={}))m.call(a,t)&&u(e,t,a[t]);if(i)for(var t of i(a))d.call(a,t)&&u(e,t,a[t]);return e},h=(e,a)=>s(e,o(a));let f=(0,l.forwardRef)((e,a)=>l.createElement(r.Z,h(p({ref:a},e),{weights:n})));f.displayName="MagnifyingGlass"}},function(e){e.O(0,[403,690,435,298,888,774,179],function(){return e(e.s=7334)}),_N_E=e.O()}]);