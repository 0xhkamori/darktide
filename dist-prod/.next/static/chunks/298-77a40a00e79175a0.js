"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[298],{1464:function(e,t,r){r.d(t,{Z:function(){return p}});var a=r(5893),n=r(7294),o=r(1163),s=r(4221),c=r(3550),l=r(6391),i=r(3839),d=r(4301),u=r(8626),f=r(8130);let m=[{name:"Home",href:"/dashboard",icon:c.T},{name:"Schedule",href:"/dashboard/schedule",icon:l.f},{name:"Grades",href:"/dashboard/grades",icon:i.X},{name:"Homework",href:"/dashboard/homework",icon:d.B},{name:"Attendance",href:"/dashboard/attendance",icon:u.y},{name:"Profile",href:"/dashboard/profile",icon:f.n}];var g=()=>{let e=(0,o.useRouter)();n.useEffect(()=>{console.log("Current path:",e.pathname)},[e.pathname]);let t=e=>t=>{t.preventDefault(),window.location.href=e};return(0,a.jsx)("div",{className:"fixed bottom-0 left-0 right-0 z-50 blur-backdrop py-1 shadow-elevation",children:(0,a.jsx)("nav",{className:"max-w-screen-lg mx-auto px-2",children:(0,a.jsx)("ul",{className:"flex justify-around items-center",children:m.map(r=>{let n=e.pathname===r.href||"/dashboard"!==r.href&&e.pathname.startsWith(r.href);return(0,a.jsx)("li",{className:"relative",children:(0,a.jsxs)("a",{href:r.href,className:"nav-item flex flex-col items-center p-2 ".concat(n?"text-primary":"text-text-secondary"),onClick:t(r.href),children:[(0,a.jsxs)("span",{className:"relative",children:[(0,a.jsx)(r.icon,{size:24,weight:n?"fill":"regular"}),n&&(0,a.jsx)(s.E.span,{className:"absolute -bottom-1 left-1/2 w-1 h-1 bg-primary rounded-full",layoutId:"bottomNavIndicator",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}})]}),(0,a.jsx)("span",{className:"text-xs mt-1 font-medium",children:r.name})]})},r.name)})})})})},p=e=>{let{children:t,title:r}=e;return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col bg-background pb-20",children:[r&&(0,a.jsx)("header",{className:"sticky top-0 z-40 blur-backdrop py-4 shadow-sm",children:(0,a.jsx)("div",{className:"max-w-screen-lg mx-auto px-4",children:(0,a.jsx)("h1",{className:"text-2xl font-mono font-bold text-text-primary",children:r})})}),(0,a.jsx)(s.E.main,{className:"flex-grow flex flex-col",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2,ease:"easeInOut"},children:(0,a.jsx)("div",{className:"max-w-screen-lg mx-auto px-4 py-4 w-full",children:t})}),(0,a.jsx)(g,{})]})}},6650:function(e,t,r){var a=r(5893);r(7294);var n=r(4221);t.Z=e=>{let{children:t,className:r="",onClick:o,withHover:s=!0}=e;return(0,a.jsx)(n.E.div,{className:"card ".concat(s?"hover:shadow-elevation hover:-translate-y-1":""," ").concat(r),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},onClick:o,whileHover:s?{scale:1.02}:void 0,whileTap:s?{scale:.98}:void 0,children:t})}},9648:function(e,t,r){var a=r(5893);r(7294);var n=r(297);t.Z=e=>{let{message:t,onRetry:r}=e;return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-6 bg-surface/50 rounded-xl",children:[(0,a.jsx)(n.v,{size:48,weight:"duotone",className:"text-red-500 mb-3"}),(0,a.jsx)("h3",{className:"text-xl font-mono font-bold text-text-primary mb-2",children:"Error"}),(0,a.jsx)("p",{className:"text-text-secondary text-center mb-4",children:t}),r&&(0,a.jsx)("button",{onClick:r,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors",children:"Retry"})]})}},5720:function(e,t,r){var a=r(5893);r(7294);var n=r(4221);let o={primary:"border-primary",accent:"border-accent",white:"border-white"};t.Z=e=>{let{size:t="medium",color:r="primary",text:s="Loading..."}=e;return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-4",children:[(0,a.jsx)(n.E.div,{className:"rounded-full border-2 border-t-transparent ".concat({small:"w-4 h-4",medium:"w-8 h-8",large:"w-12 h-12"}[t]," ").concat(o[r]),animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),s&&(0,a.jsx)("p",{className:"mt-2 text-text-secondary font-mono text-sm",children:s})]})}},4029:function(e,t,r){r.d(t,{EO:function(){return o},d$:function(){return s},tm:function(){return c}});var a=r(7294),n=r(7066);let o=(e,t)=>{let[r,o]=(0,a.useState)([]),[s,c]=(0,a.useState)(!0),[l,i]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async()=>{c(!0),i(null);try{let r;let a="";switch(e){case"lessons":if(!t)throw Error("Date range is required for lessons");a="/api/vulcan/lessons?startDate=".concat(t.startDate,"&endDate=").concat(t.endDate),console.log("[DEBUG] Fetching lessons: ".concat(a)),r=await n.Z.get(a);break;case"exams":if(!t)throw Error("Date range is required for exams");a="/api/vulcan/exams?startDate=".concat(t.startDate,"&endDate=").concat(t.endDate),console.log("[DEBUG] Fetching exams: ".concat(a)),r=await n.Z.get(a);break;case"attendance":if(!t)throw Error("Date range is required for attendance");a="/api/vulcan/attendance?startDate=".concat(t.startDate,"&endDate=").concat(t.endDate),console.log("[DEBUG] Fetching attendance: ".concat(a)),r=await n.Z.get(a);break;case"grades":a="/api/vulcan/grades",console.log("[DEBUG] Fetching grades: ".concat(a)),r=await n.Z.get(a);break;case"homework":if(!t)throw Error("Date range is required for homework");a="/api/vulcan/homework?startDate=".concat(t.startDate,"&endDate=").concat(t.endDate),console.log("[DEBUG] Fetching homework: ".concat(a)),r=await n.Z.get(a);break;default:throw Error("Unsupported data type: ".concat(e))}console.log("[DEBUG] API response for ".concat(e,":"),r),r.data&&Array.isArray(r.data)?o(r.data):r.data&&r.data.Envelope&&Array.isArray(r.data.Envelope)?(console.log("[DEBUG] Extracted array from Envelope for ".concat(e)),o(r.data.Envelope)):(console.warn("[DEBUG] Unexpected API response format for ".concat(e,":"),r.data),o([]))}catch(t){var r,a,s;console.error("[DEBUG] Error fetching ".concat(e," data:"),t),console.error("[DEBUG] Error details:",(null===(r=t.response)||void 0===r?void 0:r.data)||t.message),i(Error((null===(s=t.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.error)||t.message||"Failed to fetch ".concat(e," data")))}finally{c(!1)}})()},[e,null==t?void 0:t.startDate,null==t?void 0:t.endDate]),{data:r,isLoading:s,error:l}},s=e=>{let t=(()=>{let t=new Date,r=t.getDay(),a=new Date(t);a.setDate(t.getDate()-(0===r?6:r-1)),a.setHours(0,0,0,0);let n=new Date(a);n.setDate(a.getDate()+6),n.setHours(23,59,59,999);let o=new Date(a);o.setDate(a.getDate()-7);let s=new Date(n);s.setDate(n.getDate()+7);let c={startDate:o.toISOString().split("T")[0],endDate:s.toISOString().split("T")[0]};return console.log("[DEBUG] ".concat(e," - Requesting data for extended date range:"),c),c})(),r=o(e,t);return r.data?console.log("[DEBUG] ".concat(e," - Received ").concat(r.data.length," items from API")):r.error?console.error("[DEBUG] ".concat(e," - API Error:"),r.error):console.log("[DEBUG] ".concat(e," - Loading data...")),r},c=e=>{let t=(()=>{let t=new Date,r=new Date(t.getFullYear(),t.getMonth(),t.getDate());console.log("[DEBUG] ".concat(e," - Requesting data for extended date range:"),r);let a=new Date(t.getFullYear(),t.getMonth(),t.getDate());return console.log("[DEBUG] ".concat(e," - Requesting data for extended date range:"),a),console.log(r.getFullYear()+"-"+String(r.getMonth()+1).padStart(2,"0")+"-"+String(r.getDate()).padStart(2,"0")),console.log(a.getFullYear()+"-"+String(a.getMonth()+1).padStart(2,"0")+"-"+String(a.getDate()).padStart(2,"0")),{startDate:r.getFullYear()+"-"+String(r.getMonth()+1).padStart(2,"0")+"-"+String(r.getDate()).padStart(2,"0"),endDate:a.getFullYear()+"-"+String(a.getMonth()+1).padStart(2,"0")+"-"+String(a.getDate()).padStart(2,"0")}})();return o(e,t)}},9681:function(e,t,r){r.d(t,{Wq:function(){return f},_j:function(){return m},e9:function(){return u},ji:function(){return d},mr:function(){return i},p6:function(){return c},sG:function(){return s}});var a=r(197),n=r(6582),o=r(5360);let s=e=>{if(!e)return null;if("string"==typeof e)try{return(0,a.D)(e)}catch(e){return console.error("Failed to parse date string:",e),null}if(e instanceof Date)return e;if("object"==typeof e)try{let t=e.Year||e.year,r=(e.Month||e.month)-1,a=e.Day||e.day;if(t&&void 0!==r&&a)return new Date(t,r,a)}catch(e){console.error("Failed to parse date object:",e)}return null},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd.MM.yyyy";if(!e)return"N/A";let r=s(e);if(!r)return"N/A";try{return(0,n.WU)(r,t,{locale:o._})}catch(e){return console.error("Error formatting date:",e),"N/A"}},l=e=>{if(!e)return null;if("string"==typeof e)try{return(0,a.D)(e)}catch(e){return console.error("Failed to parse time string:",e),null}if("object"==typeof e)try{let t=e.Hour||e.hour||0,r=e.Minute||e.minute||0,a=new Date;return a.setHours(t,r,0,0),a}catch(e){console.error("Failed to parse time object:",e)}return null},i=e=>{if(!e)return"N/A";let t=l(e);if(!t)return"N/A";try{return(0,n.WU)(t,"HH:mm")}catch(e){return console.error("Error formatting time:",e),"N/A"}},d=e=>{if(!e)return"N/A";let t=s(e);if(!t)return"N/A";try{return(0,n.WU)(t,"EEEE",{locale:o._})}catch(e){return console.error("Error getting day of week:",e),"N/A"}},u=e=>{if(!e)return"N/A";if(e.Content){let t="object"==typeof e.Content&&null!==e.Content?JSON.stringify(e.Content):String(e.Content),r="";return(e.Comment&&(r="object"==typeof e.Comment&&null!==e.Comment?JSON.stringify(e.Comment):String(e.Comment)),r.trim())?"".concat(t," (").concat(r,")"):t}return e.ContentRaw?"object"==typeof e.ContentRaw&&null!==e.ContentRaw?JSON.stringify(e.ContentRaw):String(e.ContentRaw):null!==e.Value&&void 0!==e.Value?"object"==typeof e.Value&&null!==e.Value?JSON.stringify(e.Value):String(e.Value):"N/A"},f=e=>{if(!e)return"text-text-secondary";let t="string"==typeof e?parseFloat(e):e;return isNaN(t)?"text-text-secondary":t<=1.5?"text-red-500":t<=2.5?"text-orange-500":t<=3.5?"text-yellow-500":t<=4.5?"text-green-400":"text-green-500"},m=e=>{if(!e)return{status:"N/A",color:"text-text-secondary"};let t=-1;if(e.PresenceType){if("object"==typeof e.PresenceType&&null!==e.PresenceType&&"number"==typeof e.PresenceType.Id){if((t=e.PresenceType.Id)>1e3){if(1228===t)return{status:"Present",color:"text-green-500"};if(1229===t)return{status:"Absent",color:"text-red-500"};if(1231===t)return{status:"Present",color:"text-green-500"}}}else"number"==typeof e.PresenceType&&(t=e.PresenceType)}else"number"==typeof e.presenceTypeId?t=e.presenceTypeId:e.presenceType&&("present"===e.presenceType?t=0:"absent"===e.presenceType?t=1:"late"===e.presenceType?t=2:"excused"===e.presenceType&&(t=3));switch(t){case 0:return{status:"Present",color:"text-green-500"};case 1:return{status:"Absent",color:"text-red-500"};case 2:return{status:"Late",color:"text-orange-500"};case 3:return{status:"Excused",color:"text-blue-500"};default:return{status:"Unknown",color:"text-text-secondary"}}}}}]);